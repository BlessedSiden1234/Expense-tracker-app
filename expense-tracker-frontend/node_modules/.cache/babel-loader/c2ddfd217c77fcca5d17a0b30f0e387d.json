{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\USER\\\\Projects\\\\expense-tracker-app\\\\expense-tracker-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"C:\\\\Users\\\\USER\\\\Projects\\\\expense-tracker-app\\\\expense-tracker-frontend\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\USER\\\\Projects\\\\expense-tracker-app\\\\expense-tracker-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"C:\\\\Users\\\\USER\\\\Projects\\\\expense-tracker-app\\\\expense-tracker-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\USER\\\\Projects\\\\expense-tracker-app\\\\expense-tracker-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\USER\\\\Projects\\\\expense-tracker-app\\\\expense-tracker-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\USER\\\\Projects\\\\expense-tracker-app\\\\expense-tracker-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\USER\\\\Projects\\\\expense-tracker-app\\\\expense-tracker-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\USER\\\\Projects\\\\expense-tracker-app\\\\expense-tracker-frontend\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\USER\\\\Projects\\\\expense-tracker-app\\\\expense-tracker-frontend\\\\src\\\\components\\\\Common\\\\EditExpenseForm.js\";\nimport React, { Component } from \"react\";\nimport DatePicker from \"react-datepicker\";\nimport moment from \"moment\";\nimport $ from \"jquery\";\nimport Loader from \"./Loader\";\nimport * as firebase from \"../../firebase/firebase\";\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport \"../Home/styles/form.css\";\n\nvar EditExpenseForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(EditExpenseForm, _Component);\n\n  function EditExpenseForm(props) {\n    var _this;\n\n    _classCallCheck(this, EditExpenseForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditExpenseForm).call(this, props));\n    var expense = props.expense; // no .value\n\n    _this.state = {\n      date: moment(expense.date),\n      day: moment(expense.date).day(),\n      expense: expense.expense,\n      category: expense.category,\n      comments: expense.comments,\n      uid: _this.props.user.uid,\n      dataSaved: false\n    };\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handelDateChange = _this.handelDateChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(EditExpenseForm, [{\n    key: \"handleSubmit\",\n    value: function () {\n      var _handleSubmit = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var updatedExpense, response, data;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault(); // Build updated fields\n\n                updatedExpense = {\n                  userId: this.state.uid,\n                  id: this.props.expense.key,\n                  // your record ID in Cosmos DB\n                  date: this.state.date.toISOString(),\n                  day: moment(this.state.date).day(),\n                  expense: Math.ceil(this.state.expense * this.props.convertedCurrency),\n                  category: this.state.category,\n                  comments: this.state.comments\n                };\n                _context.prev = 2;\n                _context.next = 5;\n                return fetch(\"http://localhost:7071/api/updateExpense\", // your Azure Function\n                {\n                  method: \"PUT\",\n                  // or \"POST\" depending on your function route\n                  headers: {\n                    \"Content-Type\": \"application/json\"\n                  },\n                  body: JSON.stringify(updatedExpense)\n                });\n\n              case 5:\n                response = _context.sent;\n                _context.next = 8;\n                return response.json();\n\n              case 8:\n                data = _context.sent;\n\n                if (response.ok) {\n                  _context.next = 11;\n                  break;\n                }\n\n                throw new Error(data.error || \"Failed to update expense\");\n\n              case 11:\n                console.log(\"Expense updated:\", data); // close popup\n\n                $(\"#closePopup\").click();\n                _context.next = 18;\n                break;\n\n              case 15:\n                _context.prev = 15;\n                _context.t0 = _context[\"catch\"](2);\n                console.error(\"Error updating expense:\", _context.t0);\n\n              case 18:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 15]]);\n      }));\n\n      function handleSubmit(_x) {\n        return _handleSubmit.apply(this, arguments);\n      }\n\n      return handleSubmit;\n    }()\n  }, {\n    key: \"handleChange\",\n    value: function handleChange(e) {\n      this.setState(_defineProperty({}, e.target.name, e.target.value));\n    }\n  }, {\n    key: \"handelDateChange\",\n    value: function handelDateChange(date) {\n      this.setState({\n        date: date,\n        day: moment(date).day()\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.props.settings) {\n        var inputNightMode = {\n          background: \"#2c2b2b\",\n          color: \"#a9a0a0\",\n          border: \"1px solid #9b8c8cc7\"\n        };\n        var inputDayMode = {\n          background: \"#fff\",\n          color: \"#495057\"\n        };\n        var validationBox = {\n          background: \"rgba(0,0,0,0)\",\n          color: \"#ffecb8\",\n          fontSize: \"12px\",\n          width: \"60%\",\n          position: \"absolute\",\n          bottom: \"15px\",\n          left: \"15px\"\n        };\n        return React.createElement(\"form\", {\n          onSubmit: this.handleSubmit,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"form-group row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"col-sm-2 col-xs-6 col-form-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, \"Date\")), React.createElement(\"div\", {\n          className: \"col-sm-10 col-xs-6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(DatePicker, {\n          className: \"form-control date \" + (this.props.settings.mode === \"night\" ? \"inputNightMode\" : \"inputDayMode\"),\n          name: \"date\",\n          selected: this.state.date,\n          onChange: this.handelDateChange.bind(this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"form-group row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"col-sm-2 col-xs-6 col-form-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 127\n          },\n          __self: this\n        }, \"Expense\")), React.createElement(\"div\", {\n          className: \"col-sm-10 col-xs-6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 129\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          className: \"form-control\",\n          required: true,\n          type: \"number\",\n          name: \"expense\",\n          onChange: this.handleChange.bind(this),\n          value: this.state.expense,\n          style: this.props.settings.mode === \"night\" ? inputNightMode : inputDayMode,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 130\n          },\n          __self: this\n        }))), React.createElement(\"div\", {\n          className: \"form-group row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"col-sm-2 col-xs-6 col-form-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }, \"category\")), React.createElement(\"div\", {\n          className: \"col-sm-10 col-xs-6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145\n          },\n          __self: this\n        }, React.createElement(\"select\", {\n          className: \"form-control\",\n          name: \"category\",\n          value: this.state.category,\n          onChange: this.handleChange.bind(this),\n          style: this.props.settings.mode === \"night\" ? inputNightMode : inputDayMode,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146\n          },\n          __self: this\n        }, React.createElement(\"option\", {\n          value: \"Food\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153\n          },\n          __self: this\n        }, this.props.settings.editedCategories[\"Food\"] ? this.props.settings.editedCategories[\"Food\"] : \"Food\"), React.createElement(\"option\", {\n          value: \"Automobile\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154\n          },\n          __self: this\n        }, this.props.settings.editedCategories[\"Automobile\"] ? this.props.settings.editedCategories[\"Automobile\"] : \"Automobile\"), React.createElement(\"option\", {\n          value: \"Entertainment\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 155\n          },\n          __self: this\n        }, this.props.settings.editedCategories[\"Entertainment\"] ? this.props.settings.editedCategories[\"Entertainment\"] : \"Entertainment\"), React.createElement(\"option\", {\n          value: \"Clothing\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 156\n          },\n          __self: this\n        }, this.props.settings.editedCategories[\"Clothing\"] ? this.props.settings.editedCategories[\"Clothing\"] : \"Clothing\"), React.createElement(\"option\", {\n          value: \"Healthcare\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157\n          },\n          __self: this\n        }, this.props.settings.editedCategories[\"Healthcare\"] ? this.props.settings.editedCategories[\"Healthcare\"] : \"Healthcare\"), React.createElement(\"option\", {\n          value: \"Travel\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        }, this.props.settings.editedCategories[\"Travel\"] ? this.props.settings.editedCategories[\"Travel\"] : \"Travel\"), React.createElement(\"option\", {\n          value: \"Shopping\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 159\n          },\n          __self: this\n        }, this.props.settings.editedCategories[\"Shopping\"] ? this.props.settings.editedCategories[\"Shopping\"] : \"Shopping\"), React.createElement(\"option\", {\n          value: \"Personal Care\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, this.props.settings.editedCategories[\"Personal Care\"] ? this.props.settings.editedCategories[\"Personal Care\"] : \"Personal Care\"), React.createElement(\"option\", {\n          value: \"Investment\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, this.props.settings.editedCategories[\"Investment\"] ? this.props.settings.editedCategories[\"Investment\"] : \"Investment\"), React.createElement(\"option\", {\n          value: \"Gifts & Donations\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162\n          },\n          __self: this\n        }, this.props.settings.editedCategories[\"Gifts & Donations\"] ? this.props.settings.editedCategories[\"Gifts & Donations\"] : \"Gifts & Donations\"), React.createElement(\"option\", {\n          value: \"Bills & Utilities\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        }, this.props.settings.editedCategories[\"Bills & Utilities\"] ? this.props.settings.editedCategories[\"Bills & Utilities\"] : \"Bills & Utilities\"), React.createElement(\"option\", {\n          value: \"Others\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 164\n          },\n          __self: this\n        }, this.props.settings.editedCategories[\"Others\"] ? this.props.settings.editedCategories[\"Others\"] : \"Others\")))), React.createElement(\"div\", {\n          className: \"form-group row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 168\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          className: \"col-sm-2 col-xs-6 col-form-label\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 170\n          },\n          __self: this\n        }, \"Comments\")), React.createElement(\"div\", {\n          className: \"col-sm-10 col-xs-6\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, React.createElement(\"textarea\", {\n          className: \"form-control\",\n          type: \"text\",\n          required: true,\n          name: \"comments\",\n          onChange: this.handleChange.bind(this),\n          value: this.state.comments,\n          style: this.props.settings.mode === \"night\" ? inputNightMode : inputDayMode,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 173\n          },\n          __self: this\n        }))), this.state.dataSaved ? React.createElement(\"span\", {\n          className: \"bg-success success-msg\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186\n          },\n          __self: this\n        }, \" You did not update anything\") : React.createElement(\"span\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188\n          },\n          __self: this\n        }), this.state.expense > 0 && this.state.date && this.state.category ? React.createElement(\"button\", {\n          className: \"btn btn-primary float-right\",\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 191\n          },\n          __self: this\n        }, \"save\") : React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 195\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          style: validationBox,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 196\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }, \" Expense : should be greater than 0 \"), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198\n          },\n          __self: this\n        }, \" Date : should be selected \")), React.createElement(\"button\", {\n          className: \"btn btn-primary float-right\",\n          disabled: true,\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200\n          },\n          __self: this\n        }, \"save\")));\n      } else {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 209\n          },\n          __self: this\n        }, React.createElement(Loader, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 210\n          },\n          __self: this\n        }));\n      }\n    }\n  }]);\n\n  return EditExpenseForm;\n}(Component);\n\nexport default EditExpenseForm;","map":{"version":3,"sources":["C:\\Users\\USER\\Projects\\expense-tracker-app\\expense-tracker-frontend\\src\\components\\Common\\EditExpenseForm.js"],"names":["React","Component","DatePicker","moment","$","Loader","firebase","EditExpenseForm","props","expense","state","date","day","category","comments","uid","user","dataSaved","handleSubmit","bind","handleChange","handelDateChange","event","preventDefault","updatedExpense","userId","id","key","toISOString","Math","ceil","convertedCurrency","fetch","method","headers","body","JSON","stringify","response","json","data","ok","Error","error","console","log","click","e","setState","target","name","value","settings","inputNightMode","background","color","border","inputDayMode","validationBox","fontSize","width","position","bottom","left","mode","editedCategories"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nimport DatePicker from \"react-datepicker\";\r\nimport moment from \"moment\";\r\nimport $ from \"jquery\";\r\n\r\nimport Loader from \"./Loader\";\r\n\r\nimport * as firebase from \"../../firebase/firebase\";\r\n\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport \"../Home/styles/form.css\";\r\n\r\nclass EditExpenseForm extends Component {\r\n   constructor(props) {\r\n    super(props);\r\n\r\n    const expense = props.expense; // no .value\r\n\r\n    this.state = {\r\n        date: moment(expense.date),\r\n        day: moment(expense.date).day(),\r\n        expense: expense.expense,\r\n        category: expense.category,\r\n        comments: expense.comments,\r\n        uid: this.props.user.uid,\r\n        dataSaved: false\r\n    };\r\n\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handelDateChange = this.handelDateChange.bind(this);\r\n}\r\n\r\nasync handleSubmit(event) {\r\n        event.preventDefault();\r\n\r\n        // Build updated fields\r\n        const updatedExpense = {\r\n            userId: this.state.uid,\r\n            id: this.props.expense.key,      // your record ID in Cosmos DB\r\n            date: this.state.date.toISOString(),\r\n            day: moment(this.state.date).day(),\r\n            expense: Math.ceil(this.state.expense * this.props.convertedCurrency),\r\n            category: this.state.category,\r\n            comments: this.state.comments\r\n        };\r\n\r\n        try {\r\n            const response = await fetch(\r\n                \"http://localhost:7071/api/updateExpense\", // your Azure Function\r\n                {\r\n                    method: \"PUT\",  // or \"POST\" depending on your function route\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify(updatedExpense),\r\n                }\r\n            );\r\n\r\n            const data = await response.json();\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.error || \"Failed to update expense\");\r\n            }\r\n\r\n            console.log(\"Expense updated:\", data);\r\n\r\n            // close popup\r\n            $(\"#closePopup\").click();\r\n\r\n        } catch (error) {\r\n            console.error(\"Error updating expense:\", error);\r\n        }\r\n    }\r\n\r\n    handleChange(e) {\r\n        this.setState({ [e.target.name]: e.target.value });\r\n    }\r\n\r\n    handelDateChange(date) {\r\n        this.setState({\r\n            date: date,\r\n            day: moment(date).day()\r\n        });\r\n    }\r\n\r\n\r\n    render() {\r\n        if (this.props.settings) {\r\n            const inputNightMode = {\r\n                background: \"#2c2b2b\",\r\n                color: \"#a9a0a0\",\r\n                border: \"1px solid #9b8c8cc7\"\r\n            };\r\n\r\n            const inputDayMode = { background: \"#fff\", color: \"#495057\" };\r\n\r\n            const validationBox = {\r\n                background: \"rgba(0,0,0,0)\",\r\n                color: \"#ffecb8\",\r\n                fontSize: \"12px\",\r\n                width: \"60%\",\r\n                position: \"absolute\",\r\n                bottom: \"15px\",\r\n                left: \"15px\"\r\n            };\r\n\r\n            return (\r\n                <form onSubmit={this.handleSubmit}>\r\n                    <div className=\"form-group row\">\r\n                        <label className=\"col-sm-2 col-xs-6 col-form-label\">\r\n                            <span>Date</span>\r\n                        </label>\r\n                        <div className=\"col-sm-10 col-xs-6\">\r\n                            <DatePicker\r\n                                className={\r\n                                    \"form-control date \" +\r\n                                    (this.props.settings.mode === \"night\" ? \"inputNightMode\" : \"inputDayMode\")\r\n                                }\r\n                                name=\"date\"\r\n                                selected={this.state.date}\r\n                                onChange={this.handelDateChange.bind(this)}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                        <label className=\"col-sm-2 col-xs-6 col-form-label\">\r\n                            <span>Expense</span>\r\n                        </label>\r\n                        <div className=\"col-sm-10 col-xs-6\">\r\n                            <input\r\n                                className=\"form-control\"\r\n                                required\r\n                                type=\"number\"\r\n                                name=\"expense\"\r\n                                onChange={this.handleChange.bind(this)}\r\n                                value={this.state.expense}\r\n                                style={this.props.settings.mode === \"night\" ? inputNightMode : inputDayMode}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                        <label className=\"col-sm-2 col-xs-6 col-form-label\">\r\n                            <span>category</span>\r\n                        </label>\r\n                        <div className=\"col-sm-10 col-xs-6\">\r\n                            <select\r\n                                className=\"form-control\"\r\n                                name=\"category\"\r\n                                value={this.state.category}\r\n                                onChange={this.handleChange.bind(this)}\r\n                                style={this.props.settings.mode === \"night\" ? inputNightMode : inputDayMode}\r\n                            >\r\n                                <option value=\"Food\">{this.props.settings.editedCategories[\"Food\"] ? this.props.settings.editedCategories[\"Food\"] : \"Food\"}</option>\r\n                                <option value=\"Automobile\">{this.props.settings.editedCategories[\"Automobile\"] ? this.props.settings.editedCategories[\"Automobile\"] : \"Automobile\"}</option>\r\n                                <option value=\"Entertainment\">{this.props.settings.editedCategories[\"Entertainment\"] ? this.props.settings.editedCategories[\"Entertainment\"] : \"Entertainment\"}</option>\r\n                                <option value=\"Clothing\">{this.props.settings.editedCategories[\"Clothing\"] ? this.props.settings.editedCategories[\"Clothing\"] : \"Clothing\"}</option>\r\n                                <option value=\"Healthcare\">{this.props.settings.editedCategories[\"Healthcare\"] ? this.props.settings.editedCategories[\"Healthcare\"] : \"Healthcare\"}</option>\r\n                                <option value=\"Travel\">{this.props.settings.editedCategories[\"Travel\"] ? this.props.settings.editedCategories[\"Travel\"] : \"Travel\"}</option>\r\n                                <option value=\"Shopping\">{this.props.settings.editedCategories[\"Shopping\"] ? this.props.settings.editedCategories[\"Shopping\"] : \"Shopping\"}</option>\r\n                                <option value=\"Personal Care\">{this.props.settings.editedCategories[\"Personal Care\"] ? this.props.settings.editedCategories[\"Personal Care\"] : \"Personal Care\"}</option>\r\n                                <option value=\"Investment\">{this.props.settings.editedCategories[\"Investment\"] ? this.props.settings.editedCategories[\"Investment\"] : \"Investment\"}</option>\r\n                                <option value=\"Gifts & Donations\">{this.props.settings.editedCategories[\"Gifts & Donations\"] ? this.props.settings.editedCategories[\"Gifts & Donations\"] : \"Gifts & Donations\"}</option>\r\n                                <option value=\"Bills & Utilities\">{this.props.settings.editedCategories[\"Bills & Utilities\"] ? this.props.settings.editedCategories[\"Bills & Utilities\"] : \"Bills & Utilities\"}</option>\r\n                                <option value=\"Others\">{this.props.settings.editedCategories[\"Others\"] ? this.props.settings.editedCategories[\"Others\"] : \"Others\"}</option>\r\n                            </select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group row\">\r\n                        <label className=\"col-sm-2 col-xs-6 col-form-label\">\r\n                            <span>Comments</span>\r\n                        </label>\r\n                        <div className=\"col-sm-10 col-xs-6\">\r\n                            <textarea\r\n                                className=\"form-control\"\r\n                                type=\"text\"\r\n                                required\r\n                                name=\"comments\"\r\n                                onChange={this.handleChange.bind(this)}\r\n                                value={this.state.comments}\r\n                                style={this.props.settings.mode === \"night\" ? inputNightMode : inputDayMode}\r\n                            />\r\n                        </div>\r\n                    </div>\r\n\r\n                    {this.state.dataSaved ? (\r\n                        <span className=\"bg-success success-msg\"> You did not update anything</span>\r\n                    ) : (\r\n                        <span />\r\n                    )}\r\n                    {this.state.expense > 0 && this.state.date && this.state.category ? (\r\n                        <button className=\"btn btn-primary float-right\" type=\"submit\">\r\n                            save\r\n                        </button>\r\n                    ) : (\r\n                        <div>\r\n                            <div style={validationBox}>\r\n                                <div> Expense : should be greater than 0 </div>\r\n                                <div> Date : should be selected </div>\r\n                            </div>\r\n                            <button className=\"btn btn-primary float-right\" disabled type=\"submit\">\r\n                                save\r\n                            </button>\r\n                        </div>\r\n                    )}\r\n                </form>\r\n            );\r\n        } else {\r\n            return (\r\n                <div>\r\n                    <Loader />\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n\r\nexport default EditExpenseForm;\r\n"]},"metadata":{},"sourceType":"module"}